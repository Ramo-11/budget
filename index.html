<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Sahab Budget</title>
        <!-- CSS Files -->
        <link rel="stylesheet" href="css/base.css" />
        <link rel="stylesheet" href="css/features.css" />
        <link rel="stylesheet" href="css/dashboard.css" />
        <link rel="stylesheet" href="css/budgetview.css" />
        <link rel="stylesheet" href="css/modals.css" />
        <link rel="icon" href="/images/logo.png" type="image/x-icon" />

        <!-- External Libraries -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    </head>
    <body>
        <div class="container">
            <!-- Header -->
            <div class="header">
                <div
                    style="
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                        width: 100%;
                    "
                >
                    <div style="display: flex; align-items: center; gap: 15px">
                        <img
                            src="/images/logo.png"
                            alt="Sahab Solutions"
                            style="height: 32px; width: auto"
                        />
                        <div>
                            <h1 style="margin: 0; font-size: 24px">Sahab Budget</h1>
                            <p
                                style="
                                    font-size: 11px;
                                    color: rgba(255, 255, 255, 0.7);
                                    margin: 2px 0 0 0;
                                "
                            >
                                by
                                <a
                                    href="https://sahab-solutions.com"
                                    target="_blank"
                                    style="color: #818cf8; text-decoration: none"
                                    >Sahab Solutions</a
                                >
                            </p>
                        </div>
                    </div>

                    <div class="nav-buttons">
                        <button class="nav-btn active">Dashboard</button>
                        <button class="nav-btn" onclick="window.location.href='analytics.html'">
                            Analytics
                        </button>
                        <button class="nav-btn" onclick="window.location.href='settings.html'">
                            Settings
                        </button>
                        <button class="nav-btn" onclick="window.location.href='about.html'">
                            About
                        </button>
                    </div>
                </div>
            </div>

            <!-- Upload Section -->
            <div class="upload-section">
                <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap">
                    <div class="file-input-wrapper">
                        <input
                            type="file"
                            id="csvFile"
                            accept=".csv"
                            multiple
                            onchange="handleFileUpload(event)"
                        />
                        <span>üìÅ Upload CSV Files</span>
                    </div>

                    <div class="month-selector" id="monthSelector">
                        <label>View:</label>
                        <select id="monthDropdown" onchange="switchToMonth(this.value)"></select>
                    </div>

                    <!-- Quick action buttons -->
                    <div
                        class="action-buttons"
                        style="margin-left: auto; display: flex; gap: 8px; flex-wrap: wrap"
                    >
                        <button
                            class="btn btn-secondary"
                            onclick="openBudgetGoals()"
                            title="View budget goals"
                        >
                            üéØ Budget Goals
                        </button>
                        <button
                            class="btn btn-secondary"
                            onclick="openDateRangeSelector()"
                            title="View custom date range"
                        >
                            üìÖ Custom Dates
                        </button>
                        <button
                            class="btn btn-secondary"
                            onclick="openComparison()"
                            title="Compare two months"
                        >
                            üìä Compare Months
                        </button>
                    </div>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Processing your data...</p>
                </div>
            </div>

            <!-- Dashboard View -->
            <div class="view active" id="dashboardView">
                <div class="summary-cards" id="summaryCards"></div>
                <div class="charts-container">
                    <div class="chart-wrapper">
                        <h3>Expense Distribution</h3>
                        <canvas id="pieChart"></canvas>
                    </div>
                    <div class="chart-wrapper">
                        <h3>Category Breakdown</h3>
                        <canvas id="barChart"></canvas>
                    </div>
                </div>
                <h3 style="margin: 20px 0 10px">Detailed Breakdown</h3>
                <div class="category-details" id="categoryDetails"></div>
            </div>
        </div>

        <!-- Transactions Modal -->
        <div class="modal" id="transactionsModal">
            <div class="modal-content" style="width: 800px">
                <div class="modal-header">
                    <h2 id="modalTitle">Transactions</h2>
                    <button class="close-btn" onclick="closeModal('transactionsModal')">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="transactions-list" id="transactionsList"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeModal('transactionsModal')">
                        Close
                    </button>
                </div>
            </div>
        </div>

        <!-- Comparison Modal -->
        <div class="modal" id="comparisonModal"></div>

        <!-- Date Range Modal -->
        <div class="modal" id="dateRangeModal"></div>

        <!-- JavaScript Files -->
        <script src="js/comparison.js"></script>
        <script src="js/daterange.js"></script>
        <script src="js/widget.js"></script>
        <script src="js/core.js"></script>
        <script src="js/rules.js"></script>
        <script src="js/utils.js"></script>
        <script src="js/dashboard.js"></script>
        <script src="js/budgetView.js"></script>
        <script src="js/main.js"></script>
    </body>
</html>
